<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #000428, #004e92);
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            width: 800px;
            height: 600px;
            background: linear-gradient(to bottom, #0a0e27, #1a1f3a);
            border: 3px solid #00ffff;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
            overflow: hidden;
        }

        #gameCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #00ffff;
            font-size: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            z-index: 10;
        }

        #gameOver, #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #00ffff;
            z-index: 20;
        }

        #gameOver {
            display: none;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 255, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(0, 255, 255, 1); }
        }

        button {
            padding: 15px 40px;
            font-size: 24px;
            background: linear-gradient(45deg, #00ffff, #0080ff);
            border: none;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            border-radius: 10px;
            margin: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
            font-family: 'Courier New', monospace;
        }

        button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        }

        .controls {
            margin-top: 20px;
            font-size: 16px;
            text-align: center;
            line-height: 1.8;
        }

        #finalScore {
            font-size: 32px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="ui">
            <div>Score: <span id="score">0</span></div>
            <div>Lives: <span id="lives">3</span></div>
            <div>Level: <span id="level">1</span></div>
        </div>
        
        <div id="startScreen">
            <h1>üöÄ SPACE SHOOTER üöÄ</h1>
            <button id="startBtn">START GAME</button>
            <div class="controls">
                <p>‚Üê ‚Üí Arrow Keys to Move</p>
                <p>SPACE to Shoot</p>
                <p>Destroy all enemies and survive!</p>
            </div>
        </div>

        <div id="gameOver">
            <h1>GAME OVER</h1>
            <div id="finalScore"></div>
            <button id="restartBtn">PLAY AGAIN</button>
        </div>

        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 800;
        canvas.height = 600;

        // Audio Context for background music
        let audioCtx;
        let musicOscillator;
        let musicGain;
        let isMusicPlaying = false;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function startBackgroundMusic() {
            if (isMusicPlaying) return;
            
            initAudio();
            
            musicGain = audioCtx.createGain();
            musicGain.gain.value = 0.1;
            musicGain.connect(audioCtx.destination);

            const notes = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25];
            let noteIndex = 0;
            let lastTime = audioCtx.currentTime;

            function playNote() {
                if (!isMusicPlaying) return;

                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                
                osc.type = 'square';
                osc.frequency.value = notes[noteIndex % notes.length];
                
                gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start(audioCtx.currentTime);
                osc.stop(audioCtx.currentTime + 0.3);
                
                noteIndex++;
                setTimeout(playNote, 200);
            }

            isMusicPlaying = true;
            playNote();
        }

        function playSound(freq, duration = 0.1) {
            if (!audioCtx) return;
            
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            
            osc.frequency.value = freq;
            osc.type = 'square';
            
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + duration);
        }

        // Game objects
        const player = {
            x: canvas.width / 2 - 20,
            y: canvas.height - 80,
            width: 40,
            height: 40,
            speed: 5,
            lives: 3
        };

        let bullets = [];
        let enemies = [];
        let particles = [];
        let score = 0;
        let level = 1;
        let gameRunning = false;
        let keys = {};

        // Create stars background
        function createStars() {
            const container = document.getElementById('gameContainer');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(star);
            }
        }

        createStars();

        // Event listeners
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ' && gameRunning) {
                e.preventDefault();
                shoot();
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('restartBtn').addEventListener('click', restartGame);

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            gameRunning = true;
            initAudio();
            startBackgroundMusic();
            spawnEnemies();
            gameLoop();
        }

        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            player.x = canvas.width / 2 - 20;
            player.y = canvas.height - 80;
            player.lives = 3;
            bullets = [];
            enemies = [];
            particles = [];
            score = 0;
            level = 1;
            updateUI();
            startGame();
        }

        function shoot() {
            bullets.push({
                x: player.x + player.width / 2 - 2,
                y: player.y,
                width: 4,
                height: 15,
                speed: 7
            });
            playSound(800, 0.1);
        }

        function spawnEnemies() {
            enemies = [];
            const rows = 2 + level;
            const cols = 5 + level;
            const spacing = 60;
            const offsetX = (canvas.width - cols * spacing) / 2;
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    enemies.push({
                        x: offsetX + j * spacing,
                        y: 50 + i * 50,
                        width: 35,
                        height: 35,
                        speedX: 1 + level * 0.2,
                        direction: 1
                    });
                }
            }
        }

        function createParticles(x, y, color) {
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 4,
                    vy: (Math.random() - 0.5) * 4,
                    life: 30,
                    color: color
                });
            }
        }

        function drawPlayer() {
            ctx.fillStyle = '#00ffff';
            ctx.beginPath();
            ctx.moveTo(player.x + player.width / 2, player.y);
            ctx.lineTo(player.x, player.y + player.height);
            ctx.lineTo(player.x + player.width, player.y + player.height);
            ctx.closePath();
            ctx.fill();
            
            ctx.fillStyle = '#ff00ff';
            ctx.fillRect(player.x + 10, player.y + player.height - 10, 5, 10);
            ctx.fillRect(player.x + 25, player.y + player.height - 10, 5, 10);
        }

        function drawBullets() {
            ctx.fillStyle = '#ffff00';
            bullets.forEach(bullet => {
                ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
            });
        }

        function drawEnemies() {
            enemies.forEach(enemy => {
                ctx.fillStyle = '#ff0000';
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(enemy.x + 8, enemy.y + 8, 8, 8);
                ctx.fillRect(enemy.x + 20, enemy.y + 8, 8, 8);
            });
        }

        function drawParticles() {
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 30;
                ctx.fillRect(p.x, p.y, 3, 3);
                ctx.globalAlpha = 1;
            });
        }

        function updatePlayer() {
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
            }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                player.x += player.speed;
            }
        }

        function updateBullets() {
            bullets = bullets.filter(bullet => {
                bullet.y -= bullet.speed;
                return bullet.y > 0;
            });
        }

        function updateEnemies() {
            let shouldMoveDown = false;
            
            enemies.forEach(enemy => {
                enemy.x += enemy.speedX * enemy.direction;
                
                if (enemy.x <= 0 || enemy.x >= canvas.width - enemy.width) {
                    shouldMoveDown = true;
                }
            });
            
            if (shouldMoveDown) {
                enemies.forEach(enemy => {
                    enemy.direction *= -1;
                    enemy.y += 20;
                });
            }
        }

        function updateParticles() {
            particles = particles.filter(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                return p.life > 0;
            });
        }

        function checkCollisions() {
            // Bullets hit enemies
            bullets.forEach((bullet, bIndex) => {
                enemies.forEach((enemy, eIndex) => {
                    if (bullet.x < enemy.x + enemy.width &&
                        bullet.x + bullet.width > enemy.x &&
                        bullet.y < enemy.y + enemy.height &&
                        bullet.y + bullet.height > enemy.y) {
                        
                        bullets.splice(bIndex, 1);
                        enemies.splice(eIndex, 1);
                        score += 10;
                        createParticles(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2, '#ff0000');
                        playSound(400, 0.15);
                        updateUI();
                    }
                });
            });

            // Enemies hit player
            enemies.forEach((enemy, eIndex) => {
                if (enemy.x < player.x + player.width &&
                    enemy.x + enemy.width > player.x &&
                    enemy.y < player.y + player.height &&
                    enemy.y + enemy.height > player.y) {
                    
                    enemies.splice(eIndex, 1);
                    player.lives--;
                    createParticles(player.x + player.width / 2, player.y + player.height / 2, '#00ffff');
                    playSound(200, 0.3);
                    updateUI();
                    
                    if (player.lives <= 0) {
                        endGame();
                    }
                }

                // Enemy reaches bottom
                if (enemy.y + enemy.height > canvas.height) {
                    player.lives--;
                    updateUI();
                    if (player.lives <= 0) {
                        endGame();
                    }
                }
            });

            // Level complete
            if (enemies.length === 0 && gameRunning) {
                level++;
                updateUI();
                playSound(600, 0.5);
                setTimeout(() => {
                    if (gameRunning) spawnEnemies();
                }, 1000);
            }
        }

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = player.lives;
            document.getElementById('level').textContent = level;
        }

        function endGame() {
            gameRunning = false;
            isMusicPlaying = false;
            document.getElementById('finalScore').textContent = `Final Score: ${score}`;
            document.getElementById('gameOver').style.display = 'flex';
        }

        function gameLoop() {
            if (!gameRunning) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            updatePlayer();
            updateBullets();
            updateEnemies();
            updateParticles();
            checkCollisions();
            
            drawPlayer();
            drawBullets();
            drawEnemies();
            drawParticles();
            
            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>